/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/barea.js@1.1.0/barea.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function getBareaApp(e){return new BareaApp(e)}const DIR_BIND="ba-bind",DIR_BIND_HANDLER="ba-bind-handler",DIR_FOREACH="ba-foreach",DIR_CLICK="ba-click",DIR_CLASS="ba-class",DIR_HIDE="ba-hide",DIR_SHOW="ba-show",DIR_IMAGE_SRC="ba-img-src",DIR_IF="ba-if",DIR_HREF="ba-href",DIR_INTERPOLATION="interpolation",DIR_TYPE_BINDING="binding",DIR_TYPE_HANDLER="uihandler",DIR_TYPE_UI_SETTER="uisetter",DIR_TYPE_BOOLHANDLER="boolhandler",DIR_TYPE_TEMPLATE="template";VERB_SET_DATA="SET_DATA",VERB_SET_UI="SET_UI";const META_ARRAY_VARNAME="ba-varname",META_ARRAY_INDEX="ba-index",META_PATH="ba-path",INTERPOL_INDEX="index",INTERPOL_ARRCOUNT="count";class BareaApp{#e=0;#t=!1;#i=!0;#n;#a="";#r=!1;#o;#l={};#s=[];#c=[];#d=0;#h=!1;#p=null;constructor(e){this.#t=e,this.#m()}mount(e,t){if(this.#h)return;if(this.#h=!0,!e)return void console.error("Illegal use of mount, please pass an element or an element identifier");if(this.#n="object"==typeof e?e:document.getElementById(e),this.#o=t,this.#r?document.addEventListener("DOMContentLoaded",this.#u):document.querySelectorAll(".ba-cloak").forEach((e=>e.classList.remove("ba-cloak"))),!("fetch"in window&&"Promise"in window&&"Symbol"in window&&"Map"in window))return void console.error("Your browser and js engine is too old to use this script");const i=this.#D(((e,t,i)=>{let n=this.#y(1);n.active&&console.log(n.name,e,t,i),this.#I(i,e,t),this.#f(e),this.#b(e,t)}),this.#o);return this.#o=i,this.#g(),this.#I(),this.#f(),this.#b(),this.#t&&!this.#o.hasOwnProperty("baId")&&(this.#o.baId=++this.#e),this.#p&&this.#p.apply(this,[this.#o]),this.#o}getData(){if(this.#h)return this.#o;console.warn("barea.js is not mounted. Call mount on the instance before using this method.")}enableInterpolation(e){this.#v(e)&&(this.#i=e)}enableHideBeforeLoaded(e){this.#v(e)&&(this.#r=e)}addHandler(e,t){"function"==typeof t?this.#l[e]=t:console.warn(`Handler for "${e}" is not a function.`)}addMountedHandler(e){"function"==typeof e?this.#p=e:console.warn("The object passed to addMountedHandler is not a function.")}getPathData(e){const t=e.match(/[^.[\]]+/g);let i=this.#o;for(let e=0;e<t.length;e++)if(0!==e||"root"!==t[e].toLowerCase()){if(!i)return;i=i[t[e]]}return i}#D(e,t,i="root"){return new Proxy(t,{get:(t,n)=>{const a=t[n],r=Array.isArray(t)?`${i}[${n}]`:`${i}.${n}`;return a&&a.__isProxy?a:"object"==typeof a&&null!==a?(Array.isArray(a)||!this.#t||a.hasOwnProperty("baId")||(a.baId=++this.#e),this.#D(e,a,r)):"function"==typeof a&&["push","pop","splice","shift","unshift"].includes(a.name)?(...r)=>{const o=Array.prototype[a.name].apply(t,r);return e(i,t,n),o}:a},set:(t,n,a)=>{if(t[n]===a)return!0;if(t[n]=a,["length"].includes(n))return!0;const r=Array.isArray(t)?`${i}[${n}]`:`${i}.${n}`;return e(r,a,n),!0}})}#g(e=this.#n,t=-1){const i=[];function n(e){i.push(e);for(let t=0;t<e.children.length;t++)n(e.children[t])}e.querySelectorAll(`[${DIR_FOREACH}]`).forEach((e=>{Array.from(e.children).forEach((e=>n(e)))}));if([...e.querySelectorAll("*")].filter((e=>[...e.attributes].some((e=>e.name.startsWith("ba-"))))).forEach((e=>{const n=e.getAttributeNames().filter((e=>e.startsWith("ba-"))).map((t=>({name:t,value:e.getAttribute(t)})));i.includes(e)||n.forEach((i=>{if(i.name===DIR_FOREACH){let t=e.innerHTML.trim().replace(/>\s+</g,"><").replace(/(\S)\s{2,}(\S)/g,"$1 $2");const n=this.#E(e,e.parentElement,null,i.name,i.value,"template",!0,t,e.localName,-1,null);this.#c.push(n),e.remove()}if([DIR_HIDE,DIR_SHOW,DIR_CLASS,DIR_IMAGE_SRC,DIR_IF,DIR_HREF].includes(i.name)){if(i.name===DIR_IMAGE_SRC&&"img"!==e.localName.toLowerCase())return;if(!i.value)return;let n=!1;if(i.value.includes("root.")||(n=!0),n&&!this.#R(i.value))return;if(n&&[DIR_HIDE,DIR_SHOW,DIR_IF].includes(i.name)){let n=[];n.push(i.value);const a=this.#E(e,e.parentElement,null,i.name,"","boolhandler",!0,"","",t,n);this.#c.push(a)}else{const n=this.#E(e,e.parentElement,null,i.name,i.value,"uisetter",!0,"","",t,null);this.#c.push(n)}}if(DIR_BIND===i.name){if(!i.value)return;if(!i.value.includes("root."))return void console.error(`Then ${DIR_BIND} directive has an invalid path (${i.value}), should begin with root.`);const n=this.#E(e,e.parentElement,null,i.name,i.value,DIR_TYPE_BINDING,!0,"","",t,null);this.#c.push(n)}if(DIR_CLICK===i.name){let n=[];n.push(i.value);const a=this.#E(e,e.parentElement,null,i.name,"",DIR_TYPE_HANDLER,!0,"","",t,n);this.#c.push(a)}}))})),this.#i){const i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);for(;i.nextNode();)if(i.currentNode.nodeValue.includes("{{")&&i.currentNode.nodeValue.includes("}}")){let e=this.#_(i.currentNode.nodeValue);const n=this.#E(i.currentNode.parentElement,i.currentNode.parentElement,i.currentNode,"interpolation","","uisetter",!0,i.currentNode.nodeValue,"",t,e);this.#c.push(n)}}this.#y(4).active&&(console.log("dom dictionary: "+this.#c.length),this.#c.forEach((e=>{console.log(e)})))}#A(e){this.#c=this.#c.filter((t=>t.id!==e))}#P(e){this.#c=this.#c.filter((t=>t.templateId!==e))}#E(e,t,i,n,a,r,o,l,s,c,d){return d||(d=[]).push(a),{id:this.#d++,templateId:c,element:e,elementnextsibling:null,parentelement:t,node:i,directive:n,path:a,directivetype:r,isnew:o,templateMarkup:l,templateTagName:s,expressions:d}}#f(e="root"){let t=[];t="root"==e.toLowerCase()?this.#c.filter((e=>e.isnew&&[DIR_TYPE_BINDING,DIR_TYPE_HANDLER].includes(e.directivetype))):this.#c.filter((t=>t.isnew&&(t.path.includes(e)&&t.directivetype===DIR_TYPE_BINDING||t.directivetype===DIR_TYPE_HANDLER))),t.forEach((e=>{if(e.directive===DIR_BIND&&(e.isnew=!1,e.element.addEventListener("input",(t=>{const i=e.path.match(/[^.[\]]+/g);let n=null,a=this.#o;if(i.forEach(((e,t)=>{"root"!==e.toLowerCase()&&("object"==typeof a[e]&&(a=a[e]),n=e)})),!n)return;if(!a)return;const r=this.#y(3);let o=e.element.getAttribute(DIR_BIND_HANDLER);if(o)return o.includes("("),o=o.split("(")[0],o=o.trim(),void(this.#l[o]?this.#l[o].apply(this,[VERB_SET_DATA,e.element,a]):console.warn(`Handler function '${o}' not found.`));"checkbox"===e.element.type?(r.active&&console.log(r.name,"type: "+e.element.type,"key: "+n,"input value: "+e.element.checked),a[n]=e.element.checked):"radio"===e.element.type?(r.active&&console.log(r.name,"type: "+e.element.type,"key: "+n,"input value: "+e.element.value),e.element.checked&&(a[n]=e.element.value)):(r.active&&console.log(r.name,"type: "+e.element.type,"key: "+n,"input value: "+e.element.value),a[n]=e.element.value)}))),e.directive===DIR_CLICK){if(!e.expressions)return;if(0===!e.expressions.length)return;e.isnew=!1;let t=e.expressions[0];if(t=t.trim(),!this.#R(e.expressions[0]))return;e.element.addEventListener("click",(i=>{const n=this.#H(i.target,"ba-path");let a={};a=n?this.getPathData(n):this.#o;const r=[i,e.element,a];this.#l[t]?this.#l[t].apply(this,r):console.warn(`Handler function '${t}' not found.`)}))}}))}#I(e="init",t="root",i=this.#o){let n=[];if(t.includes("["))return;let a="push"===e,r=[];r="root"===t.toLowerCase()?this.#c.filter((e=>"template"===e.directivetype)):this.#c.filter((e=>e.path.includes(t)&&"template"===e.directivetype)),r.forEach((e=>{let[t,r]=e.path.split(" in ").map((e=>e.trim()));if(!t)throw new Error(`No variable name was found in the ${DIR_FOREACH} expression`);if(n=Array.isArray(i)?i:this.getPathData(r),!Array.isArray(n))return;n.length-e.element.children.length!=1&&(a=!1);let o=0;a?(o=n.length-1,n=n.slice(-1)):(this.#P(e.id),e.parentelement.innerHTML="");const l=document.createDocumentFragment();n.forEach((i=>{const n=document.createElement(e.templateTagName);if(this.#_(e.templateMarkup).length>0){let i=new RegExp(`{{([^}]*)\\b${t}\\b([^}]*)}}`,"g");n.innerHTML=e.templateMarkup.replace(i,((e,t,i)=>`{{${t}${r}[${o}]${i}}}`))}else n.innerHTML=e.templateMarkup;n.setAttribute("ba-varname",t),n.setAttribute("ba-path",`${r}[${o}]`),n.setAttribute("ba-index",o),n.id?n.id=n.id+`-${o}`:n.id=`${e.id}-${t}-${o}`,l.appendChild(n),n.querySelectorAll(`[${DIR_CLICK}]`).forEach((e=>{e.setAttribute("ba-varname",t),e.setAttribute("ba-path",`${r}[${o}]`),e.setAttribute("ba-index",o)})),n.querySelectorAll(`[${DIR_BIND}]`).forEach((e=>{e.setAttribute("ba-varname",t),e.setAttribute("ba-path",`${r}[${o}]`),e.setAttribute("ba-index",o);let i=e.getAttribute(DIR_BIND);i.includes(t)||console.warn(`Error The input binding ${i} used in an element under ${DIR_FOREACH} does not match the ${DIR_FOREACH} expression, should include '${t}'`);let n=i.replace(t,`${r}[${o}]`);e.setAttribute(DIR_BIND,n)})),n.querySelectorAll("*").forEach((e=>{e.id?e.id=e.id+`-${o}`:e.id=`${t}-${o}`;let i=e.getAttribute("for");i&&e.setAttribute("for",i+`-${o}`)})),this.#g(n,e.id),o++})),l.childElementCount>0&&e.parentelement.appendChild(l)}))}#b(e="root",t=this.#o){var i;(i=this).#c.filter((e=>"interpolation"===e.directive)).forEach((n=>{let a=0,r=n.templateMarkup;n.expressions.forEach((o=>{if(i.#v(t)&&!e.includes(o))return;let l=null;if("index"===o.toLowerCase()&&(l=i.#H(n.element,"ba-index")),o.endsWith(".count")){let e="";o.split(".").forEach((t=>{"count"!==t&&(e+=""===e?t:"."+t)})),e&&(l=i.getPathData(e),Array.isArray(l)&&(l=l.length))}else l=i.getPathData(o);l||(l=""),"object"==typeof l&&(l=JSON.stringify(l)),a++;const s=new RegExp(`{{\\s*${o.replace(/[.[\]]/g,"\\$&")}\\s*}}`,"g");r=r.replace(s,l)})),a>0&&(n.node.textContent=r)})),function(e,t,i){i.#c.filter((e=>"boolhandler"===e.directivetype)).forEach((e=>{const t=i.#H(e.element,"ba-path");let n={};n=t?i.getPathData(t):i.#o;let a=e.expressions[0],r=!1;a=a.trim(),i.#l[a]?r=i.#l[a].apply(i,[n]):console.warn(`Handler function '${a}' not found.`),e.directive===DIR_HIDE?e.element.style.display=r?"none":"":e.directive===DIR_SHOW?e.element.style.display=r?"":"none":e.directive===DIR_IF&&(r?e.element.parentNode||e.elementnextsibling&&e.parentelement.insertBefore(e.element,e.elementnextsibling):e.element.parentNode&&(e.elementnextsibling=e.element.nextSibling,e.element.remove()))}));const n=i.#c.filter((n=>n.directive===DIR_BIND&&(i.#v(t)&&n.path===e||!i.#v(t)&&""!==n.path)));n.forEach((e=>{let a=t;(n.length>1||!i.#v(a))&&(a=i.getPathData(e.path));let r=e.element.getAttribute(DIR_BIND_HANDLER);if(r){if(r=r.trim(),!i.#R(r))return;i.#l[r]?i.#l[r].apply(i,[VERB_SET_UI,e.element,a]):console.warn(`Handler function '${r}' not found.`)}else"checkbox"===e.element.type?(a||(a=!1),e.element.checked=a):"radio"===e.element.type?e.element.checked=e.element.value===a:(a||(a=""),e.element.value=a)}));const a=i.#c.filter((n=>(n.directive===DIR_HIDE||n.directive===DIR_SHOW)&&"uisetter"===n.directivetype&&(i.#v(t)&&n.path===e||!i.#v(t)&&""!==n.path)));a.forEach((e=>{let n=t;(a.length>1||!i.#v(n))&&(n=i.getPathData(e.path)),e.directive===DIR_HIDE?e.element.style.display=n?"none":"":e.element.style.display=n?"":"none"}));const r=i.#c.filter((n=>n.directive===DIR_CLASS&&"uisetter"===n.directivetype&&(i.#v(t)&&n.path===e||!i.#v(t)&&""!==n.path)));r.forEach((e=>{let n=t;(r.length>1||!i.#v(n))&&(n=i.getPathData(e.path)),e.element.className=n||""}));const o=i.#c.filter((n=>n.directive===DIR_IMAGE_SRC&&"uisetter"===n.directivetype&&(i.#v(t)&&n.path===e||!i.#v(t)&&""!==n.path)));o.forEach((e=>{let n=t;(o.length>1||!i.#v(n))&&(n=i.getPathData(e.path)),n&&(e.element.src=n)})),i.#c.filter((n=>n.directive===DIR_HREF&&"uisetter"===n.directivetype&&(i.#v(t)&&n.path===e||!i.#v(t)&&""!==n.path))).forEach((e=>{let n=t;(o.length>1||!i.#v(n))&&(n=i.getPathData(e.path)),n&&(e.element.href=n)}))}(e,t,this)}#N(e,t){return t.some((t=>e.includes(t)))}#H(e,t){let i=e.getAttribute(t),n=e.parentElement,a=0;for(;!i&&n&&(a++,i=n.getAttribute(t),n=n.parentElement,!(a>10)););return i||""}#R(e){return!!e&&(!this.#N(e,["(",",",")","."])||(console.error(`Invalid handlername ${e}. You should not specify arguments`),!1))}#_(e){const t=/{{(.*?)}}/g;let i,n=[];for(;null!==(i=t.exec(e));)n.push(i[1].trim());return n}#v(e){return null!==e&&"object"!=typeof e&&"function"!=typeof e}getObjectDictionary(e,t=""){let i={};for(const n in e)if(e.hasOwnProperty(n)){const a=t?`${t}.${n}`:n;"object"==typeof e[n]&&null!==e[n]?Array.isArray(e[n])?(i[a]=e[n],e[n].forEach(((e,t)=>{i[`${a}[${t}]`]=e,Object.assign(i,this.getObjectDictionary(e,`${a}[${t}]`))}))):(i[a]=e[n],Object.assign(i,this.getObjectDictionary(e[n],a))):i[a]=e[n]}return i}enableConsoleLog(e,t){const i=this.#s.findIndex((t=>t.id===e));-1!==i&&(this.#s[i].active=t)}printConsoleLogs(){console.log("barea.js available logs:"),this.#s.forEach((e=>console.log(e)))}#m(){this.#s=[{id:1,name:"Proxy call back: ",active:!1},{id:2,name:"Update dom on proxy change: ",active:!1},{id:3,name:"Update proxy on user input: ",active:!1},{id:4,name:"Build dom dictionary: ",active:!1}]}#y(e){const t=this.#s.find((t=>t.id===e));return t||{id:-1,name:"",active:!1}}#u=e=>{this.#r&&document.querySelectorAll(".ba-cloak").forEach((e=>e.classList.remove("ba-cloak")))}}
//# sourceMappingURL=/sm/5155d78156fe7aea24e6aea096303a9bcbf87d77735004fef4f0e7e10b585caa.map