/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/barea.js@1.1.2/barea.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function getBareaApp(e){return new BareaApp(e)}const DIR_BIND="ba-bind",DIR_BIND_HANDLER="ba-bind-handler",DIR_FOREACH="ba-foreach",DIR_CLICK="ba-click",DIR_CLASS="ba-class",DIR_CLASS_IF="ba-class-if",DIR_HIDE="ba-hide",DIR_SHOW="ba-show",DIR_IMAGE_SRC="ba-src",DIR_IF="ba-if",DIR_HREF="ba-href",DIR_INTERPOLATION="interpolation",DIR_TYPE_BINDING="binding",DIR_TYPE_HANDLER="uihandler",DIR_TYPE_UI_SETTER="uisetter",DIR_TYPE_BOOLHANDLER="boolhandler",DIR_TYPE_BOOLEXPR="boolexpression",DIR_TYPE_TEMPLATE="template";VERB_SET_DATA="SET_DATA",VERB_SET_UI="SET_UI";const META_ARRAY_VARNAME="ba-varname",META_ARRAY_INDEX="ba-index",META_PATH="ba-path",INTERPOL_INDEX="index",INTERPOL_ARRCOUNT="count";class BareaApp{#e=0;#t=!1;#i=!0;#n;#a="";#r=!1;#o;#s={};#l=[];#c=[];#d=0;#m=!1;#u=null;constructor(e){e&&(this.#t=e),this.#h()}mount(e,t){if(this.#m)return;if(this.#m=!0,!t)return void console.error("Illegal use of mount, please pass a content object with data and methods");if(!t.data)return void console.error("Illegal use of mount, please pass a content object with data and methods");if(!e)return void console.error("Illegal use of mount, please pass an element or an element identifier");if(this.#n="object"==typeof e?e:document.getElementById(e),this.#o=t.data,t.methods&&(this.#s=t.methods,Object.assign(this,this.#s),Object.keys(t.methods).forEach((e=>{"function"==typeof this[e]&&(this[e]=this[e].bind(this))}))),t.mounted&&(this.#u=t.mounted),this.#r?document.addEventListener("DOMContentLoaded",this.#p):document.querySelectorAll(".ba-cloak").forEach((e=>e.classList.remove("ba-cloak"))),!("fetch"in window&&"Promise"in window&&"Symbol"in window&&"Map"in window))return void console.error("Your browser and js engine is too old to use this script");const i=this.#D(((e,t,i)=>{let n=this.#I(1);n.active&&console.log(n.name,e,t,i),this.#f(i,e,t),this.#y(e),this.#b(e,t)}),this.#o);return this.#o=i,this.#R(),this.#f(),this.#y(),this.#b(),this.#t&&!this.#o.hasOwnProperty("baId")&&(this.#o.baId=++this.#e),this.#u&&this.#u.apply(this,[this.#o]),this.#o}getData(){if(this.#m)return this.#o;console.warn("barea.js is not mounted. Call mount on the instance before using this method.")}enableInterpolation(e){this.#_(e)&&(this.#i=e)}enableHideBeforeLoaded(e){this.#_(e)&&(this.#r=e)}addHandler(e,t){"function"==typeof t?this.#s[e]=t:console.warn(`Handler for "${e}" is not a function.`)}getPathData(e){const t=e.match(/[^.[\]]+/g);let i=this.#o;for(let e=0;e<t.length;e++)if(0!==e||"root"!==t[e].toLowerCase()){if(!i)return;i=i[t[e]]}return i}#D(e,t,i="root"){return new Proxy(t,{get:(t,n)=>{const a=t[n],r=Array.isArray(t)?`${i}[${n}]`:`${i}.${n}`;return a&&a.__isProxy?a:"object"==typeof a&&null!==a?(Array.isArray(a)||!this.#t||a.hasOwnProperty("baId")||(a.baId=++this.#e),this.#D(e,a,r)):"function"==typeof a&&["push","pop","splice","shift","unshift"].includes(a.name)?(...r)=>{const o=Array.prototype[a.name].apply(t,r);return e(i,t,n),o}:a},set:(t,n,a)=>{if(t[n]===a)return!0;if(t[n]=a,["length"].includes(n))return!0;const r=Array.isArray(t)?`${i}[${n}]`:`${i}.${n}`;return e(r,a,n),!0}})}#R(e=this.#n,t=-1){const i=[];function n(e){i.push(e);for(let t=0;t<e.children.length;t++)n(e.children[t])}e.querySelectorAll(`[${DIR_FOREACH}]`).forEach((e=>{Array.from(e.children).forEach((e=>n(e)))}));if([...e.querySelectorAll("*")].filter((e=>[...e.attributes].some((e=>e.name.startsWith("ba-"))))).forEach((e=>{const n=e.getAttributeNames().filter((e=>e.startsWith("ba-"))).map((t=>({name:t,value:e.getAttribute(t)})));i.includes(e)||n.forEach((i=>{if(i.name===DIR_FOREACH){let t=e.innerHTML.trim().replace(/>\s+</g,"><").replace(/(\S)\s{2,}(\S)/g,"$1 $2");const n=this.#E(e,e.parentElement,null,i.name,i.value,"template",!0,t,e.localName,-1,null);this.#c.push(n),e.remove()}if([DIR_HIDE,DIR_SHOW,DIR_IF,DIR_CLASS_IF].includes(i.name)){if(!i.value)return;let n=!1;this.#A(i.value)&&(n=!0);let a=[];if(i.name===DIR_CLASS_IF&&i.value.includes("?")){i.value.split("?").forEach((e=>{a.push(e)}))}else a.push(i.value);if(n){const n=this.#E(e,e.parentElement,null,i.name,"","boolhandler",!0,"","",t,a);this.#c.push(n)}else{const n=this.#E(e,e.parentElement,null,i.name,"","boolexpression",!0,"","",t,a);this.#c.push(n)}}if([DIR_CLASS,DIR_IMAGE_SRC,DIR_HREF].includes(i.name)){if(i.name===DIR_IMAGE_SRC&&"img"!==e.localName.toLowerCase())return;if(!i.value)return;const n=this.#E(e,e.parentElement,null,i.name,i.value,"uisetter",!0,"","",t,null);this.#c.push(n)}if(DIR_BIND===i.name){if(!i.value)return;if(!i.value.includes("root."))return void console.error(`Then ${DIR_BIND} directive has an invalid path (${i.value}), should begin with root.`);const n=this.#E(e,e.parentElement,null,i.name,i.value,DIR_TYPE_BINDING,!0,"","",t,null);this.#c.push(n)}if(DIR_CLICK===i.name){if(!this.#A(i.value))return;let n=[];n.push(i.value);const a=this.#E(e,e.parentElement,null,i.name,"",DIR_TYPE_HANDLER,!0,"","",t,n);this.#c.push(a)}}))})),this.#i){const i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);for(;i.nextNode();)if(i.currentNode.nodeValue.includes("{{")&&i.currentNode.nodeValue.includes("}}")){let e=this.#g(i.currentNode.nodeValue);const n=this.#E(i.currentNode.parentElement,i.currentNode.parentElement,i.currentNode,"interpolation","","uisetter",!0,i.currentNode.nodeValue,"",t,e);this.#c.push(n)}}this.#I(4).active&&(console.log("dom dictionary: "+this.#c.length),this.#c.forEach((e=>{console.log(e)})))}#v(e){this.#c=this.#c.filter((t=>t.id!==e))}#$(e){this.#c=this.#c.filter((t=>t.templateId!==e))}#E(e,t,i,n,a,r,o,s,l,c,d){return d||(d=[]).push(a),{id:this.#d++,templateId:c,element:e,elementnextsibling:null,parentelement:t,node:i,directive:n,path:a,directivetype:r,isnew:o,templateMarkup:s,templateTagName:l,expressions:d}}#y(e="root"){let t=[];t="root"==e.toLowerCase()?this.#c.filter((e=>e.isnew&&[DIR_TYPE_BINDING,DIR_TYPE_HANDLER].includes(e.directivetype))):this.#c.filter((t=>t.isnew&&(t.path.includes(e)&&t.directivetype===DIR_TYPE_BINDING||t.directivetype===DIR_TYPE_HANDLER))),t.forEach((e=>{if(e.directive===DIR_BIND&&(e.isnew=!1,e.element.addEventListener("input",(t=>{const i=e.path.match(/[^.[\]]+/g);let n=null,a=this.#o;if(i.forEach(((e,t)=>{"root"!==e.toLowerCase()&&("object"==typeof a[e]&&(a=a[e]),n=e)})),!n)return;if(!a)return;let r=e.element.getAttribute(DIR_BIND_HANDLER);if(r){r=r.trim();let t=this.#N(r),i=[VERB_SET_DATA,e.element,a];return i.push(...t.params),void(this.#s[t.functionName]?this.#s[t.functionName].apply(this,i):console.warn(`Handler function '${t.functionName}' not found.`))}const o=this.#I(3);"checkbox"===e.element.type?(o.active&&console.log(o.name,"type: "+e.element.type,"key: "+n,"input value: "+e.element.checked),a[n]=e.element.checked):"radio"===e.element.type?(o.active&&console.log(o.name,"type: "+e.element.type,"key: "+n,"input value: "+e.element.value),e.element.checked&&(a[n]=e.element.value)):(o.active&&console.log(o.name,"type: "+e.element.type,"key: "+n,"input value: "+e.element.value),a[n]=e.element.value)}))),e.directive===DIR_CLICK){if(!e.expressions)return;if(0===!e.expressions.length)return;e.isnew=!1;let t=e.expressions[0];t=t.trim(),e.element.addEventListener("click",(i=>{const n=this.#x(i.target,"ba-path");let a={};a=n?this.getPathData(n):this.#o;let r=[i,e.element,a],o=this.#N(t);r.push(...o.params),this.#s[o.functionName]?this.#s[o.functionName].apply(this,r):console.warn(`Handler function '${o.functionName}' not found.`)}))}}))}#f(e="init",t="root",i=this.#o){let n=[];if(t.includes("["))return;let a="push"===e,r=[];r="root"===t.toLowerCase()?this.#c.filter((e=>"template"===e.directivetype)):this.#c.filter((e=>e.path.includes(t)&&"template"===e.directivetype)),r.forEach((e=>{let[t,r]=e.path.split(" in ").map((e=>e.trim()));if(!t)throw new Error(`No variable name was found in the ${DIR_FOREACH} expression`);if(n=Array.isArray(i)?i:this.getPathData(r),!Array.isArray(n))return;n.length-e.element.children.length!=1&&(a=!1);let o=0;a?(o=n.length-1,n=n.slice(-1)):(this.#$(e.id),e.parentelement.innerHTML="");const s=document.createDocumentFragment();n.forEach((i=>{const n=document.createElement(e.templateTagName);if(this.#g(e.templateMarkup).length>0){let i=new RegExp(`{{([^}]*)\\b${t}\\b([^}]*)}}`,"g");n.innerHTML=e.templateMarkup.replace(i,((e,t,i)=>`{{${t}${r}[${o}]${i}}}`))}else n.innerHTML=e.templateMarkup;n.setAttribute("ba-varname",t),n.setAttribute("ba-path",`${r}[${o}]`),n.setAttribute("ba-index",o),n.id?n.id=n.id+`-${o}`:n.id=`${e.id}-${t}-${o}`,s.appendChild(n),n.querySelectorAll(`[${DIR_CLICK}]`).forEach((e=>{e.setAttribute("ba-varname",t),e.setAttribute("ba-path",`${r}[${o}]`),e.setAttribute("ba-index",o)})),n.querySelectorAll(`[${DIR_IF}], [${DIR_HIDE}], [${DIR_SHOW}], [${DIR_CLASS_IF}]`).forEach((e=>{if(e.hasAttribute(DIR_IF)){let i=e.getAttribute(DIR_IF);if(!this.#A(i)){i.includes(t+".")||i.includes("root.")||console.warn(`The ${DIR_IF} expression ${i} used in an element under ${DIR_FOREACH} does not match the ${DIR_FOREACH} expression, should reference '${t}' or root`);let n=i;i.includes(t+".")&&(n=i.replaceAll(t+".",`${r}[${o}].`),e.setAttribute(DIR_IF,n))}}if(e.hasAttribute(DIR_CLASS_IF)){let i=e.getAttribute(DIR_CLASS_IF);if(!this.#A(i)){i.includes(t+".")||i.includes("root.")||console.warn(`The ${DIR_CLASS_IF} expression ${i} used in an element under ${DIR_FOREACH} does not match the ${DIR_FOREACH} expression, should reference '${t}' or root`);let n=i;i.includes(t+".")&&(n=i.replaceAll(t+".",`${r}[${o}].`),e.setAttribute(DIR_CLASS_IF,n))}}if(e.hasAttribute(DIR_HIDE)){let i=e.getAttribute(DIR_HIDE);if(!this.#A(i)){i.includes(t+".")||i.includes("root.")||console.warn(`The ${DIR_HIDE} expression ${i} used in an element under ${DIR_FOREACH} does not match the ${DIR_FOREACH} expression, should reference '${t}' or root`);let n=i;i.includes(t+".")&&(n=i.replaceAll(t+".",`${r}[${o}].`),e.setAttribute(DIR_HIDE,n))}}if(e.hasAttribute(DIR_SHOW)){let i=e.getAttribute(DIR_SHOW);if(!this.#A(i)){i.includes(t+".")||i.includes("root.")||console.warn(`The  ${DIR_SHOW} expression ${i} used in an element under ${DIR_FOREACH} does not match the ${DIR_FOREACH} expression, should reference '${t}' or root`);let n=i;i.includes(t+".")&&(n=i.replaceAll(t+".",`${r}[${o}].`),e.setAttribute(DIR_SHOW,n))}}})),n.querySelectorAll(`[${DIR_BIND}]`).forEach((e=>{e.setAttribute("ba-varname",t),e.setAttribute("ba-path",`${r}[${o}]`),e.setAttribute("ba-index",o);let i=e.getAttribute(DIR_BIND);i.includes(t+".")||console.warn(`The ${DIR_BIND} binding ${i} used in an element under ${DIR_FOREACH} does not match the ${DIR_FOREACH} expression, should include '${t}'`);let n=i.replace(t+".",`${r}[${o}].`);e.setAttribute(DIR_BIND,n)})),n.querySelectorAll("*").forEach((e=>{e.id?e.id=e.id+`-${o}`:e.id=`${t}-${o}`;let i=e.getAttribute("for");i&&e.setAttribute("for",i+`-${o}`)})),this.#R(n,e.id),o++})),s.childElementCount>0&&e.parentelement.appendChild(s)}))}#b(e="root",t=this.#o){var i;(i=this).#c.filter((e=>"interpolation"===e.directive)).forEach((n=>{let a=0,r=n.templateMarkup;n.expressions.forEach((o=>{if(i.#_(t)&&!e.includes(o))return;let s=null;if("index"===o.toLowerCase()&&(s=i.#x(n.element,"ba-index")),o.endsWith(".count")){let e="";o.split(".").forEach((t=>{"count"!==t&&(e+=""===e?t:"."+t)})),e&&(s=i.getPathData(e),Array.isArray(s)&&(s=s.length))}else s=i.getPathData(o);s||(s=""),"object"==typeof s&&(s=JSON.stringify(s)),a++;const l=new RegExp(`{{\\s*${o.replace(/[.[\]]/g,"\\$&")}\\s*}}`,"g");r=r.replace(l,s)})),a>0&&(n.node.textContent=r)})),function(e,t,i){i.#c.filter((e=>"boolhandler"===e.directivetype)).forEach((e=>{const t=i.#x(e.element,"ba-path");let n={};n=t?i.getPathData(t):i.#o;let a=e.expressions[0],r=!1;a=a.trim();let o=[n],s=i.#N(a);if(o.push(...s.params),i.#s[s.functionName]?r=i.#s[s.functionName].apply(i,o):console.warn(`Handler function '${s.functionName}' not found.`),e.directive===DIR_HIDE)e.element.style.display=r?"none":"";else if(e.directive===DIR_SHOW)e.element.style.display=r?"":"none";else if(e.directive===DIR_IF)r?e.element.parentNode||e.elementnextsibling&&e.parentelement.insertBefore(e.element,e.elementnextsibling):e.element.parentNode&&(e.elementnextsibling=e.element.nextSibling,e.element.remove());else if(e.directive===DIR_CLASS_IF&&e.expressions.length>1){let t=e.expressions[1].split(/[\s,]+/);r?t.forEach((t=>{e.element.classList.contains(t)||e.element.classList.add(t)})):t.forEach((t=>{e.element.classList.contains(t)&&e.element.classList.remove(t)}))}})),i.#c.filter((e=>"boolexpression"===e.directivetype)).forEach((e=>{let t=e.expressions[0],n=!1;if(t=t.trim(),t=t.replace("root.","contextdata."),n=function(e,t){try{return new Function("contextdata",`return ${e};`)(t)}catch(e){return console.error("Error evaluating condition:",e),!1}}(t,i.#o),e.directive===DIR_HIDE)e.element.style.display=n?"none":"";else if(e.directive===DIR_SHOW)e.element.style.display=n?"":"none";else if(e.directive===DIR_IF)n?e.element.parentNode||e.elementnextsibling&&e.parentelement.insertBefore(e.element,e.elementnextsibling):e.element.parentNode&&(e.elementnextsibling=e.element.nextSibling,e.element.remove());else if(e.directive===DIR_CLASS_IF&&e.expressions.length>1){let t=e.expressions[1].split(/[\s,]+/);n?t.forEach((t=>{e.element.classList.contains(t)||e.element.classList.add(t)})):t.forEach((t=>{e.element.classList.contains(t)&&e.element.classList.remove(t)}))}}));const n=i.#c.filter((n=>n.directive===DIR_BIND&&(i.#_(t)&&n.path===e||!i.#_(t)&&""!==n.path)));n.forEach((e=>{let a=t;(n.length>1||!i.#_(a))&&(a=i.getPathData(e.path));let r=e.element.getAttribute(DIR_BIND_HANDLER);if(r){if(r=r.trim(),!i.#A(r))return;let t=i.#N(r),n=[VERB_SET_UI,e.element,a];return n.push(...t.params),void(i.#s[t.functionName]?i.#s[t.functionName].apply(i,n):console.warn(`Handler function '${t.functionName}' not found.`))}"checkbox"===e.element.type?(a||(a=!1),e.element.checked=a):"radio"===e.element.type?e.element.checked=e.element.value===a:(a||(a=""),e.element.value=a)}));const a=i.#c.filter((n=>n.directive===DIR_CLASS&&"uisetter"===n.directivetype&&(i.#_(t)&&n.path===e||!i.#_(t)&&""!==n.path)));a.forEach((e=>{let n=t;(a.length>1||!i.#_(n))&&(n=i.getPathData(e.path)),n.includes(",")&&(n=n.replaceAll(","," ")),e.element.className=n||""}));const r=i.#c.filter((n=>n.directive===DIR_IMAGE_SRC&&"uisetter"===n.directivetype&&(i.#_(t)&&n.path===e||!i.#_(t)&&""!==n.path)));r.forEach((e=>{let n=t;(r.length>1||!i.#_(n))&&(n=i.getPathData(e.path)),n&&(e.element.src=n)})),i.#c.filter((n=>n.directive===DIR_HREF&&"uisetter"===n.directivetype&&(i.#_(t)&&n.path===e||!i.#_(t)&&""!==n.path))).forEach((e=>{let n=t;(r.length>1||!i.#_(n))&&(n=i.getPathData(e.path)),n&&(e.element.href=n)}))}(e,t,this)}#N(e){function t(e){return/^'.*'$|^".*"$/.test(e)?e.slice(1,-1):"true"===e||"false"!==e&&("null"===e?null:isNaN(e)?/^\[.*\]$/.test(e)?e.slice(1,-1).split(",").map((e=>t(e.trim()))):e:e.includes(".")?parseFloat(e):parseInt(e,10))}const i=e.match(/^(\w+)\((.*)\)$/);if(!i)return null;const n=i[1],a=i[2].trim();if(""===a)return{functionName:n,params:[]};const r=[...a.matchAll(/'[^']*'|"[^"]*"|[^,]+/g)].map((e=>t(e[0].trim())));return{functionName:n,params:r}}#P(e,t){return t.some((t=>e.includes(t)))}#x(e,t){let i=e.getAttribute(t),n=e.parentElement,a=0;for(;!i&&n&&(a++,i=n.getAttribute(t),n=n.parentElement,!(a>10)););return i||""}#A(e){return!!e&&!(!e.includes("(")||!e.includes(")"))}#g(e){const t=/{{(.*?)}}/g;let i,n=[];for(;null!==(i=t.exec(e));)n.push(i[1].trim());return n}#_(e){return null!==e&&"object"!=typeof e&&"function"!=typeof e}getObjectDictionary(e,t=""){let i={};for(const n in e)if(e.hasOwnProperty(n)){const a=t?`${t}.${n}`:n;"object"==typeof e[n]&&null!==e[n]?Array.isArray(e[n])?(i[a]=e[n],e[n].forEach(((e,t)=>{i[`${a}[${t}]`]=e,Object.assign(i,this.getObjectDictionary(e,`${a}[${t}]`))}))):(i[a]=e[n],Object.assign(i,this.getObjectDictionary(e[n],a))):i[a]=e[n]}return i}enableConsoleLog(e,t){const i=this.#l.findIndex((t=>t.id===e));-1!==i&&(this.#l[i].active=t)}printConsoleLogs(){console.log("barea.js available logs:"),this.#l.forEach((e=>console.log(e)))}#h(){this.#l=[{id:1,name:"Proxy call back: ",active:!1},{id:2,name:"Update dom on proxy change: ",active:!1},{id:3,name:"Update proxy on user input: ",active:!1},{id:4,name:"Build dom dictionary: ",active:!1}]}#I(e){const t=this.#l.find((t=>t.id===e));return t||{id:-1,name:"",active:!1}}#p=e=>{this.#r&&document.querySelectorAll(".ba-cloak").forEach((e=>e.classList.remove("ba-cloak")))}}
//# sourceMappingURL=/sm/c6fdae5a8b1f15124a42ea1b190420a714e99018cf2202388d17caae761da84d.map